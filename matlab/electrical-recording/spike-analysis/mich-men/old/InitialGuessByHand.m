function pstart = InitialGuessByHand(spikes,trange,pvar,varloc,pfix,fixloc,nparms,ratefunc,dt,varnames)% InitialGuessByHand: GUI for setting initial parameter guesses in PSTRate% First do the data binning[texp,rexp] = PlotdataPSTRate(spikes,trange,pvar,varloc,pfix,fixloc,nparms,ratefunc,dt);nexp = length(spikes);dims = [nparms nexp];% Set up the axes, making room for a "refresh" buttonspdims = CalcSubplotDims(nexp);hfig = figure;for i = 1:nexp	hax(i) = subplot(spdims(1),spdims(2),i);endpos0 = get(hax,'Position');pfac = [1 0.9 1 0.9];for i = 1:nexp	pos{i} = pos0{i}.*pfac;endset(hax,{'Position'},pos');%hrfresh = uicontrol('Units','normalized','Position',[0.05 0.9 0.12 0.07],'Style','PushButton',...%	'Callback','IGBHCB Refresh',...%	'String','Refresh');hdone = uicontrol('Units','normalized','Position',[pos{1}(1) 0.9 0.12 0.07],'Style','PushButton',...	'Callback','IGBHCB Done',...	'String','Done');if (nargin > 9 & length(varnames) == length(pvar))	popstr = varnames;else	popstr = num2str((1:length(pvar))');endhpop = uicontrol('Units','normalized','Position',[0.35 0.9 0.3 0.07],'Style','PopupMenu',...	'Callback','IGBHCB ChooseParm','String',popstr,'Tag','ParmMenu');heb = uicontrol('Style','edit','Units','normalized','Position',[0.75 0.9 0.2 0.07],...	'String',num2str(pvar(1)),'Callback','IGBHCB ChangeParm','Tag','ParmBox',...	'BackgroundColor',[1 1 1],'HorizontalAlignment','left');Data.varloc = varloc;Data.pfix = pfix;Data.fixloc = fixloc;Data.nexp = nexp;Data.dims = dims;Data.texp = texp;Data.rexp = rexp;Data.ratefunc = ratefunc;Data.hax = hax;Data.pcur = pvar;set(hfig,'UserData',Data)IGBHCB('Refresh',hfig);uiwait;if (ishandle(hfig))	Data = get(hfig,'UserData');	pstart = Data.pcur;	close(hfig);end
