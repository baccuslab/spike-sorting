function RecordingWorkTry(channels,scanrate,nscans,buffersize,npix,axH,textH,filename)% RecordingWorkTry(recparams,npix,axH,textH)% A trial file to test real-time plotting routines.% Plots random numbersglobal gIsRecordingcounter = 0;xcoord = 1:npix;patchH = zeros(1,64);for i = 1:64	patchH(i) = fillmm2(zeros(1,npix),zeros(1,npix),xcoord);endwhile (gIsRecording & counter < nscans)	delete(patchH);	patchH = zeros(1,64);	minmax = rand(64,2*npix);	minmax(:,xcoord) = -minmax(:,xcoord);	for i = 1:64		axes(axH(i));		patchH(i) = fillmm2(minmax(i,xcoord),minmax(i,xcoord+npix),xcoord);	end	set(textH,'String',sprintf('%d seconds remaining',nscans-counter));	counter = counter + 1;	%if (mod(counter,100) == 0)		drawnow	%endendset(textH,'String','All done!');gIsRecording = 0;set(findobj(gcbf,'Tag','StopRecButton'),'Enable','off'); % enable Stop buttonreturnfunction h = fillmm2(vmin,vmax,x)yy = [vmin flipdim(vmax,2)];xx = [x flipdim(x,2)];h = fill(xx,yy,'b','EdgeColor','b');return